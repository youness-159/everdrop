import{_ as f,w as x,r as i,z as j,j as e,A as h,L as p}from"./index-D20nmIH3.js";import{u as S}from"./index.esm-DmimYm8l.js";import{H as w}from"./index-CbIC06Fo.js";import{UserContext as k}from"./userContextAPI-CEPSfSC_.js";import{I as d}from"./Input-vhI47h7Q.js";import{u as L}from"./useMutation-DyA3nlKG.js";import{l as N,G as b,o as y}from"./GoogleButton-Dm9E0RVb.js";import{F as E}from"./Form-Bb_4C8Am.js";import{L as v}from"./Logo-CLGUa75o.js";import{B as F}from"./Button-H5VG5V_F.js";import{H as I}from"./Header-CqzZOjQ-.js";import"./helpers-CVGqI_J_.js";import"./userAPI-CITHf_Ex.js";import"./shopAPI-BOLETFd3.js";import"./bundle-mjs-3VKOpVsw.js";import"./index-Cq_GCqD9.js";import"./utils-km2FGkQ4.js";import"./Modal-Vl1I1XdS.js";import"./Loader-D6LGd44p.js";import"./categoryAPI-Dutoc9WM.js";function C(){const{mutate:a,data:n,isSuccess:l}=L({mutationFn:N,onSuccess:()=>f.success("Login successfull"),onError:()=>f.error("Login failed")});return{mutate:a,loggedUser:n,isSuccess:l}}function Y(){const{register:a,handleSubmit:n}=S(),{mutate:l,isSuccess:c,loggedUser:m}=C(),t=x(),{setUser:r}=i.useContext(k),[s,u]=j();i.useEffect(()=>{s.get("token")&&(localStorage.setItem("token",s.get("token")),s.delete("token"),u(s),r({}),t("/"))},[s,r,u,t]),i.useEffect(()=>{let o=!0;localStorage.getItem("token")!=="null"&&(o=!1),localStorage.getItem("token")!==null&&(o=!1),o&&t("/")},[t]);function g(o){l(o)}return i.useEffect(()=>{c&&(r(m.user),localStorage.setItem("token",m.token),t("/"))},[c,m,t,r]),e.jsxs(e.Fragment,{children:[e.jsx(I,{}),e.jsxs(E,{className:"w-1/4 absolute top-1/2 left-1/2 bg-white p-12 -translate-x-1/2 -translate-y-1/2 rounded-xl",onSubmit:n(g),children:[e.jsx(v,{className:"flex justify-center mb-12"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{type:"text",placeholder:"Email",register:a,name:"email",icon:e.jsx(w,{})}),e.jsx(d,{type:"password",placeholder:"Password",register:a,name:"password",icon:e.jsx(h,{})})]}),e.jsx(F,{className:"filled w-full mt-6",children:"Log in"}),e.jsxs("div",{className:"mt-8 flex justify-between",children:[e.jsx(p,{to:"/signup",children:"Create an acoount"}),e.jsx(p,{to:"/account/forgot-password",children:"Forget Password ?"})]}),e.jsx("div",{className:"mt-8 text-center font-semibold",children:"OR"}),e.jsx("div",{className:"mt-8 ",children:e.jsx(b,{text:"Sign in with Google",onClick:y,iconClassName:"w-10"})})]})]})}export{Y as default};
