import{_ as l,z as j,r as n,j as r}from"./index-D20nmIH3.js";import{B as d}from"./Button-H5VG5V_F.js";import{u as g}from"./useProduct-z8ECe8Ys.js";import{L as z}from"./Loader-D6LGd44p.js";import{t as m}from"./bundle-mjs-3VKOpVsw.js";import{UserContext as b}from"./userContextAPI-CEPSfSC_.js";import{u as C}from"./useMutation-DyA3nlKG.js";import{a as N}from"./cartAPI-CYNTN5LZ.js";import{s as v}from"./shopAPI-BOLETFd3.js";import"./useQuery-BIalZ7-4.js";import"./utils-km2FGkQ4.js";import"./productAPI-DVH5Y8XO.js";import"./helpers-CVGqI_J_.js";import"./userAPI-CITHf_Ex.js";function w(){const{mutate:o}=C({mutationFn:N,onSuccess:()=>{l.success("Item added to cart")},onError:e=>{l.error("Failed to add item to cart"),console.log(e)}});return{mutate:o}}const q={quantity:1,size:"",color:""};function k(o,e){switch(e.type){case"product/quantity":return{...o,quantity:e.payload};case"product/size":return{...o,size:e.payload};case"product/color":return{...o,color:e.payload};default:console.error("Unknown action type !",e)}}function V(){const[o]=j(),{product:e,isLoading:i}=g(o.get("id")),[t,c]=n.useReducer(k,q),{user:p,setUser:I}=n.useContext(b),{mutate:u}=w();n.useEffect(()=>{i||(c({type:"product/color",payload:e.colors[0]}),c({type:"product/size",payload:e.sizes[0]}))},[i,e]);function x(s){return()=>c({type:"product/size",payload:e.sizes[s]})}function h(s){return()=>c({type:"product/color",payload:e.colors[s]})}function y(s){const a=s.target.value;c({type:"product/quantity",payload:+a})}function f(){const s={product:e._id,productColor:t.color,productSize:t.size,quantity:t.quantity,user:p._id};u(s)}return i?r.jsx(z,{}):r.jsxs("div",{className:"px-72 py-24 flex  gap-12",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("div",{className:"w-[50rem] h-[50rem] bg-gray-200 flex items-center ",children:r.jsx("img",{src:`${v}/imgs/products/${e.coverImage}`,alt:"",className:"w-full"})})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-5xl mb-6",children:e.name}),r.jsxs("p",{className:"text-[2rem] mb-4",children:["$",e.price]}),r.jsxs("div",{className:"space-y-2 mb-6",children:[r.jsxs("p",{children:["Sku: ",e.sku]}),r.jsxs("p",{children:["Brand: ",e==null?void 0:e.brand]})]}),r.jsxs("div",{children:[r.jsx("input",{type:"number",className:"border-2 border-gray-400 w-16 h-12 p-2",defaultValue:1,onChange:y,min:1,max:e.quantity,id:""}),r.jsx("span",{className:"ml-4 uppercase",children:"Item"})]}),r.jsx(d,{className:"uppercase py-6 px-12 mt-4 mb-12 border-2 bg-zinc-700 text-zinc-50 hover:shadow-lg hover:shadow-zinc-300 duration-[.2s] ",onClick:f,children:"Add To Cart"}),r.jsx("div",{className:"flex gap-4 flex-wrap mb-5",children:e.sizes.map((s,a)=>r.jsx(d,{className:m(" border-2 py-2 px-4 min-w-14 min-h-14",(t==null?void 0:t.size)===s&&"bg-zinc-700 text-zinc-100"),onClick:x(a),children:s},a))}),r.jsx("div",{className:"mb-8 flex gap-4 flex-wrap",children:e.colors.map((s,a)=>r.jsx(d,{className:m(" border-2 py-2 px-4 min-w-14 min-h-14",(t==null?void 0:t.color)===s&&"bg-zinc-700 text-zinc-100"),onClick:h(a),children:s},a))}),r.jsx("p",{children:e.description})]})]})}export{V as default};
